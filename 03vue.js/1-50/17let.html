<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>

<body>

  <button>按钮1</button>
  <button>按钮2</button>
  <button>按钮3</button>
  <button>按钮4</button>
  <button>按钮5</button>

  <script>
    // ES5中的var是没有块级作用域的(if/for)
    // ES6中的let是由块级作用的(if/for)

    // ES5之前因为if和for都没有块级作用域的概念, 所以在很多时候, 我们都必须借助于function的作用域来解决应用外面变量的问题.
    // ES6中,加入了let, let它是有if和for的块级作用域.
    // 1.变量作用域: 变量在什么范围内是可用.
    // {
    //   var name = 'why';
    //   console.log(name);
    // }
    // console.log(name);

    // 2.没有块级作用域引起的问题: if的块级
    // var func;
    // if (true) {
    //   var name = 'why';
    //   func = function () {
    //     console.log(name);
    //   }
    //   // func()
    // }
    // name = 'kobe'
    // func()
    // // console.log(name);

    var name = 'why'
    function abc(bbb) { // bbb = 'why'
      console.log(bbb);
    }
    abc(name)
    name = 'kobe'

    // 3.没有块级作用域引起的问题: for的块级
    // 为什么闭包可以解决问题: 函数是一个作用域.
    // 把i在当时传入这个立即执行的匿名函数以后，函数就有作用域了，外面的i再怎么变也不受影响
    // var btns = document.getElementsByTagName('button');
    // for (var i=0; i<btns.length; i++) {
    //   (function (num) { // 0
    //     btns[i].addEventListener('click', function () {
    //       console.log('第' + num + '个按钮被点击');
    //     })
    //   })(i)
    // }

    const btns = document.getElementsByTagName('button')
    // 如果用var这里给每个buttun绑定了一个监听
    // 然后i的值就变了,里面的i也变了
    // 这个监听里的function是在点击的时候才会运行的回调函数
    // 当变成let的时候,for就有了作用域
    // 每一次执行的时候,for后面的{}是有自己的作用域的,因此i就是当前这个大括号里的i
    // 所以不受外面的i的变化影响


    // function my(i) {
    //   console.log('第' + i + '个按钮被点击');
    // }
    // for (let i = 0; i < btns.length; i++) {
    //   btns[i].addEventListener('click', function () {
    //     my(i);
    //   });
    // }



    for (let i = 0; i < btns.length; i++) {
      btns[i].addEventListener('click', function () {
        console.log('第' + i + '个按钮被点击');
      });
    }



  // ES5
  // var i = 5
  // {
  //   btns[i].addEventListener('click', function () {
  //   console.log('第' + i + '个按钮被点击');
  // })
  // }
  //
  // {
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  //
  //
  // {
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  //
  //
  // {
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  //
  // {
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  //
  // // ES6
  // { i = 0
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  //
  // { i = 1
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  // { i = 2
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  // { i = 3
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }
  // { i = 4
  //   btns[i].addEventListener('click', function () {
  //     console.log('第' + i + '个按钮被点击');
  //   })
  // }

  </script>

</body>

</html>